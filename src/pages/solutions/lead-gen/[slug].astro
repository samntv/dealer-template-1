---
import { getCollection, type CollectionEntry } from 'astro:content';
import PageLayout from '~/layouts/PageLayout.astro';
import CallToAction from '~/components/widgets/CallToAction.astro';

export async function getStaticPaths() {
  const solutions = await getCollection('solutions');
  const leadGen = solutions.filter(s => s.data.category === 'lead-gen');
  return leadGen.map((entry) => ({
    params: { slug: entry.slug.replace('lead-gen/', '') },
    props: { entry },
  }));
}

type Props = {
  entry: CollectionEntry<'solutions'>;
};

const { entry } = Astro.props;
const { Content } = await entry.render();

const metadata = {
  title: `${entry.data.title} - Your Brand`,
  description: entry.data.description,
};
---

<PageLayout metadata={metadata}>
  <article class="py-16">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <header class="mb-12">
        <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">
          {entry.data.title}
        </h1>
        <p class="text-xl text-gray-600">
          {entry.data.description}
        </p>
        {entry.data.ctaText && entry.data.ctaLink && (
          <a href={entry.data.ctaLink} class="inline-block mt-6 px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition">
            {entry.data.ctaText}
          </a>
        )}
      </header>
      
      <div class="prose prose-lg max-w-none">
        <Content />
      </div>
    </div>
  </article>

  <CallToAction />
</PageLayout>
